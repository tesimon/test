{# ===================== TESTIMONIALS SECTION ===================== #}
<section class="container-fluid py-5 bg-light">
  <div class="container py-5">
      <div class="row g-5 align-items-center">
          {# Left Text Content #}
          <div class="col-lg-6 wow fadeInLeft">
              <h2 class="display-5 text-primary mb-4">{{ testimonials.title }}</h2>
              <p class="lead mb-4">{{ testimonials.description }}</p>
              <a href="{{ testimonials.button.url }}" 
                 class="btn btn-primary rounded-pill px-4 py-2 hover-scale">
                  {{ testimonials.button.text }}
                  <i class="fas fa-arrow-right ms-2"></i>
              </a>
          </div>

          {# Slider Container #}
          <div class="col-lg-5 wow fadeInRight rounded border" >
              <div class="swiper testimonialSwiper">
                  <div class="swiper-wrapper">
                      {% for card in testimonials.cards %}
                      <div class="swiper-slide">
                          <div class="testimonial-card bg-white p-4 rounded-4 shadow position-relative">
                              {# Card Content #}                              

                              <div class="d-flex align-items-center">
                                  <div class="flex-shrink-0">
                                      <img src="{{ card.author_image }}" 
                                           class="rounded-circle author-img" 
                                           alt="{{ card.author }}"
                                           width="60"
                                           height="60">
                                  </div>
                                  <div class="flex-grow-1 ms-3">
                                      <h5 class="mb-0">{{ card.author }}</h5>
                                      <small class="text-muted">{{ card.role }}</small>
                                  </div>
                              </div>
                              <div class="rating my-2" aria-label="Rating: 5 stars">
                                {% for rate in range(1, 6) %}
                                <i class="fas fa-star text-primary fs-5"></i>
                                {% endfor %}
                            </div>
                            {# <div class="quote-icon text-primary fs-3 position-absolute top-50 start-0 mt-4 ms-0">
                              <i class="fas fa-quote-left"></i>
                          </div> #}
                          
                          <p class="fs-8 text-dark">{{ card.content }}</p>
                          </div>
                      </div>
                      {% endfor %}
                    </div>
                    
                  </div>
                  {# Slider Navigation #}
                  {# <div class="swiper-button-next">next</div>
                  <div class="swiper-button-prev">preview</div> #}
          </div>
      </div>
  </div>
</section>

<style>
  .testimonial-card {
      height: auto; /* 16:9 ratio base height */
      display: flex;
      flex-direction: column;
      justify-content: space-between;
      transition: transform 0.3s ease;
  }
  
  .testimonialSwiper {
      max-width: 800px;
      margin-left: auto;
  }
  
  .swiper-slide {
      opacity: 0.5;
      transition: opacity 0.3s ease;
  }
  
  .swiper-slide-active {
      opacity: 1;
  }
  
  .swiper-button-next,
  .swiper-button-prev {
      color: var(--bs-primary) !important;
      background: rgba(255, 255, 255, 0.9);
      padding: 25px;
      border-radius: 50%;
      backdrop-filter: blur(2px);
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
  }
  
  .author-img {
      border: 2px solid var(--bs-primary);
      padding: 2px;
  }
  
  @media (max-width: 992px) {
      .testimonial-card {
          height: auto;
          min-height: 400px;
      }
      .testimonialSwiper {
          max-width: 100%;
          margin-top: 2rem;
      }
  }
</style>
{# Add Swiper CSS FIRST #}
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css">

{# Then add Swiper JS #}
<script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
<script>

  // Initialize Swiper AFTER DOM content loads
document.addEventListener('DOMContentLoaded', function() {
    const testimonialSwiper = new Swiper('.testimonialSwiper', {
        loop: true,
        slidesPerView: 1,
        effect: 'fade',
        autoplay: {
            delay: 5000,
            disableOnInteraction: false,
        },
        navigation: {
            nextEl: '.swiper-button-next',
            prevEl: '.swiper-button-prev',
        },
      


 
      autoplay: {
          delay: 5000,
          disableOnInteraction: false,
      },
      navigation: {
          nextEl: '.swiper-button-next',
          prevEl: '.swiper-button-prev',
      },
      breakpoints: {
          768: {
              effect: 'slide',
              fadeEffect: false
          }
      }
});
});
</script>